--
-- PostgreSQL database dump
--

\restrict iAChTaQMloVM4m8iSeEs2WsXeY7waZfEtCWoP3QYxsMl1sBLIwrcFpvUkpJSwvx

-- Dumped from database version 15.8
-- Dumped by pg_dump version 15.14 (Debian 15.14-1.pgdg11+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: public; Type: SCHEMA; Schema: -; Owner: -
--

CREATE SCHEMA public;


--
-- Name: SCHEMA public; Type: COMMENT; Schema: -; Owner: -
--

COMMENT ON SCHEMA public IS 'standard public schema';


--
-- Name: check_recipe_component_fk(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.check_recipe_component_fk() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF NEW.component_kind = 'ITEM' THEN
        PERFORM 1 FROM items WHERE item_id = NEW.component_id;
        IF NOT FOUND THEN
            RAISE EXCEPTION 'Component item % does not exist', NEW.component_id;
        END IF;
    ELSIF NEW.component_kind = 'RECIPE' THEN
        PERFORM 1 FROM recipes WHERE recipe_id = NEW.component_id;
        IF NOT FOUND THEN
            RAISE EXCEPTION 'Component recipe % does not exist', NEW.component_id;
        END IF;
    ELSE
        RAISE EXCEPTION 'Invalid component_kind: %', NEW.component_kind;
    END IF;
    RETURN NEW;
END;
$$;


--
-- Name: prevent_recipe_cycle(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.prevent_recipe_cycle() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_found INTEGER;
BEGIN
    IF NEW.component_kind = 'RECIPE' THEN
        -- Check for direct self-reference
        IF NEW.parent_recipe_id = NEW.component_id THEN
            RAISE EXCEPTION 'Circular recipe reference detected';
        END IF;
        WITH RECURSIVE deps AS (
            SELECT rc.component_id
            FROM recipe_components rc
            WHERE rc.parent_recipe_id = NEW.component_id AND rc.component_kind = 'RECIPE'
            UNION
            SELECT rc.component_id
            FROM recipe_components rc
            JOIN deps d ON rc.parent_recipe_id = d.component_id
            WHERE rc.component_kind = 'RECIPE'
        )
        SELECT 1 INTO v_found FROM deps WHERE component_id = NEW.parent_recipe_id LIMIT 1;
        IF v_found IS NOT NULL THEN
            RAISE EXCEPTION 'Circular recipe reference detected';
        END IF;
    END IF;
    RETURN NEW;
END;
$$;


--
-- Name: update_modified_column(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.update_modified_column() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
   NEW.updated_at = NOW();
   RETURN NEW;
END;
$$;


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: auth_group; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.auth_group (
    id integer NOT NULL,
    name character varying(150) NOT NULL
);


--
-- Name: auth_group_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.auth_group ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_group_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_group_permissions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.auth_group_permissions (
    id bigint NOT NULL,
    group_id integer NOT NULL,
    permission_id integer NOT NULL
);


--
-- Name: auth_group_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.auth_group_permissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_group_permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_permission; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.auth_permission (
    id integer NOT NULL,
    name character varying(255) NOT NULL,
    content_type_id integer NOT NULL,
    codename character varying(100) NOT NULL
);


--
-- Name: auth_permission_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.auth_permission ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_permission_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_user; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.auth_user (
    id integer NOT NULL,
    password character varying(128) NOT NULL,
    last_login timestamp with time zone,
    is_superuser boolean NOT NULL,
    username character varying(150) NOT NULL,
    first_name character varying(150) NOT NULL,
    last_name character varying(150) NOT NULL,
    email character varying(254) NOT NULL,
    is_staff boolean NOT NULL,
    is_active boolean NOT NULL,
    date_joined timestamp with time zone NOT NULL
);


--
-- Name: auth_user_groups; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.auth_user_groups (
    id bigint NOT NULL,
    user_id integer NOT NULL,
    group_id integer NOT NULL
);


--
-- Name: auth_user_groups_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.auth_user_groups ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_user_groups_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_user_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.auth_user ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_user_user_permissions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.auth_user_user_permissions (
    id bigint NOT NULL,
    user_id integer NOT NULL,
    permission_id integer NOT NULL
);


--
-- Name: auth_user_user_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.auth_user_user_permissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_user_user_permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: category; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.category (
    category_id integer NOT NULL,
    category text NOT NULL,
    sub_category text NOT NULL
);


--
-- Name: category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.category_category_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.category_category_id_seq OWNED BY public.category.category_id;


--
-- Name: departments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.departments (
    permitted_departments text,
    department_id integer NOT NULL
);


--
-- Name: departments_department_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.departments_department_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: departments_department_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.departments_department_id_seq OWNED BY public.departments.department_id;


--
-- Name: django_admin_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.django_admin_log (
    id integer NOT NULL,
    action_time timestamp with time zone NOT NULL,
    object_id text,
    object_repr character varying(200) NOT NULL,
    action_flag smallint NOT NULL,
    change_message text NOT NULL,
    content_type_id integer,
    user_id integer NOT NULL,
    CONSTRAINT django_admin_log_action_flag_check CHECK ((action_flag >= 0))
);


--
-- Name: django_admin_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.django_admin_log ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_admin_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: django_content_type; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.django_content_type (
    id integer NOT NULL,
    app_label character varying(100) NOT NULL,
    model character varying(100) NOT NULL
);


--
-- Name: django_content_type_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.django_content_type ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_content_type_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: django_migrations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.django_migrations (
    id bigint NOT NULL,
    app character varying(255) NOT NULL,
    name character varying(255) NOT NULL,
    applied timestamp with time zone NOT NULL
);


--
-- Name: django_migrations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.django_migrations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_migrations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: goods_received_notes; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.goods_received_notes (
    grn_id integer NOT NULL,
    grn_number text NOT NULL,
    po_id integer,
    supplier_id integer NOT NULL,
    received_date date NOT NULL,
    notes text,
    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,
    received_by_id integer
);


--
-- Name: goods_received_notes_grn_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.goods_received_notes_grn_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: goods_received_notes_grn_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.goods_received_notes_grn_id_seq OWNED BY public.goods_received_notes.grn_id;


--
-- Name: grn_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.grn_items (
    grn_item_id integer NOT NULL,
    grn_id integer NOT NULL,
    item_id integer NOT NULL,
    po_item_id integer,
    quantity_ordered_on_po numeric(10,2),
    quantity_received numeric(10,2) NOT NULL,
    unit_price_at_receipt numeric(10,2) NOT NULL,
    notes text
);


--
-- Name: grn_items_grn_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.grn_items_grn_item_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: grn_items_grn_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.grn_items_grn_item_id_seq OWNED BY public.grn_items.grn_item_id;


--
-- Name: grn_sequence; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.grn_sequence
    START WITH 1001
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: indent_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.indent_items (
    indent_item_id integer NOT NULL,
    indent_id integer NOT NULL,
    item_id integer NOT NULL,
    requested_qty numeric NOT NULL,
    notes text,
    fulfilled_qty numeric DEFAULT 0,
    issued_qty numeric DEFAULT '0'::numeric NOT NULL,
    item_status text DEFAULT 'Pending Issue'::text NOT NULL,
    CONSTRAINT indent_items_requested_qty_check CHECK ((requested_qty > (0)::numeric))
);


--
-- Name: TABLE indent_items; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TABLE public.indent_items IS 'Specific items requested within each indent';


--
-- Name: indent_items_indent_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.indent_items_indent_item_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: indent_items_indent_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.indent_items_indent_item_id_seq OWNED BY public.indent_items.indent_item_id;


--
-- Name: indents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.indents (
    indent_id integer NOT NULL,
    mrn text NOT NULL,
    requested_by text NOT NULL,
    date_required date,
    date_submitted timestamp with time zone DEFAULT CURRENT_TIMESTAMP,
    status text DEFAULT 'Submitted'::text,
    notes text,
    date_processed timestamp with time zone,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    department_id integer NOT NULL,
    processed_by_id integer
);


--
-- Name: TABLE indents; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TABLE public.indents IS 'Header information for each material indent request';


--
-- Name: indents_indent_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.indents_indent_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: indents_indent_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.indents_indent_id_seq OWNED BY public.indents.indent_id;


--
-- Name: item_departments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.item_departments (
    item_id integer NOT NULL,
    department_id integer NOT NULL
);


--
-- Name: items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.items (
    item_id integer NOT NULL,
    name character varying(255) NOT NULL,
    reorder_point numeric DEFAULT 0,
    current_stock numeric DEFAULT 0,
    notes text,
    is_active boolean DEFAULT true,
    updated_at timestamp without time zone,
    category_id_ref bigint,
    unit_id integer NOT NULL
);


--
-- Name: TABLE items; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TABLE public.items IS 'Master list of all inventory items (ingredients, supplies, etc.)';


--
-- Name: items_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.items_item_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: items_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.items_item_id_seq OWNED BY public.items.item_id;


--
-- Name: menu_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.menu_items (
    menu_item_id integer NOT NULL,
    item_id integer NOT NULL,
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


--
-- Name: menu_items_menu_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.menu_items_menu_item_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: menu_items_menu_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.menu_items_menu_item_id_seq OWNED BY public.menu_items.menu_item_id;


--
-- Name: mrn_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.mrn_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: SEQUENCE mrn_seq; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON SEQUENCE public.mrn_seq IS 'Sequence generator for unique Material Request Numbers (MRN)';


--
-- Name: po_sequence; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.po_sequence
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: purchase_order_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.purchase_order_items (
    po_item_id integer NOT NULL,
    po_id integer NOT NULL,
    item_id integer NOT NULL,
    quantity_ordered numeric(10,2) NOT NULL,
    unit_price numeric(10,2) NOT NULL,
    line_total numeric(12,2) NOT NULL
);


--
-- Name: purchase_order_items_po_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.purchase_order_items_po_item_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: purchase_order_items_po_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.purchase_order_items_po_item_id_seq OWNED BY public.purchase_order_items.po_item_id;


--
-- Name: purchase_orders; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.purchase_orders (
    po_id integer NOT NULL,
    po_number text NOT NULL,
    supplier_id integer NOT NULL,
    order_date date NOT NULL,
    expected_delivery_date date,
    status text DEFAULT 'Draft'::text NOT NULL,
    total_amount numeric(12,2) DEFAULT 0.00,
    notes text,
    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,
    created_by_id integer,
    updated_by_id integer
);


--
-- Name: purchase_orders_po_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.purchase_orders_po_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: purchase_orders_po_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.purchase_orders_po_id_seq OWNED BY public.purchase_orders.po_id;


--
-- Name: recipe_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.recipe_items (
    recipe_item_id integer NOT NULL,
    recipe_id integer NOT NULL,
    item_id integer,
    quantity numeric NOT NULL,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now(),
    child_recipe_id integer,
    unit text,
    loss_pct numeric DEFAULT 0,
    sort_order integer,
    notes text,
    CONSTRAINT recipe_items_target_chk CHECK ((((item_id IS NOT NULL) AND (child_recipe_id IS NULL)) OR ((item_id IS NULL) AND (child_recipe_id IS NOT NULL))))
);


--
-- Name: recipe_items_recipe_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.recipe_items_recipe_item_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: recipe_items_recipe_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.recipe_items_recipe_item_id_seq OWNED BY public.recipe_items.recipe_item_id;


--
-- Name: recipes; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.recipes (
    recipe_id integer NOT NULL,
    name text NOT NULL,
    description text,
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now(),
    type text,
    default_yield_qty numeric,
    default_yield_unit text,
    plating_notes text,
    tags jsonb,
    version integer,
    effective_from timestamp without time zone,
    effective_to timestamp without time zone
);


--
-- Name: recipes_recipe_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.recipes_recipe_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: recipes_recipe_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.recipes_recipe_id_seq OWNED BY public.recipes.recipe_id;


--
-- Name: sales_transactions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.sales_transactions (
    sale_id integer NOT NULL,
    quantity numeric(10,2),
    user_id text,
    notes text,
    sale_date timestamp with time zone NOT NULL,
    recipe_id integer
);


--
-- Name: sales_transactions_sale_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.sales_transactions ALTER COLUMN sale_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.sales_transactions_sale_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: stock_transactions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.stock_transactions (
    transaction_id integer NOT NULL,
    item_id integer NOT NULL,
    quantity_change numeric NOT NULL,
    transaction_type text NOT NULL,
    transaction_date timestamp with time zone DEFAULT CURRENT_TIMESTAMP,
    user_id text,
    related_po_id integer,
    notes text,
    related_indent_id integer,
    user_id_int integer
);


--
-- Name: TABLE stock_transactions; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TABLE public.stock_transactions IS 'Audit trail of all inventory movements (in/out/adjustments)';


--
-- Name: stock_transactions_transaction_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.stock_transactions_transaction_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: stock_transactions_transaction_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.stock_transactions_transaction_id_seq OWNED BY public.stock_transactions.transaction_id;


--
-- Name: suppliers; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.suppliers (
    supplier_id integer NOT NULL,
    name character varying(255) NOT NULL,
    contact_person text,
    phone text,
    email text,
    address text,
    notes text,
    is_active boolean DEFAULT true,
    updated_at timestamp without time zone
);


--
-- Name: TABLE suppliers; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TABLE public.suppliers IS 'Stores information about suppliers providing inventory items.';


--
-- Name: suppliers_supplier_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.suppliers_supplier_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: suppliers_supplier_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.suppliers_supplier_id_seq OWNED BY public.suppliers.supplier_id;


--
-- Name: units; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.units (
    purchase_unit text NOT NULL,
    base_unit text NOT NULL,
    conversion_factor numeric(18,6) NOT NULL,
    unit_id integer NOT NULL,
    CONSTRAINT units_conversion_factor_positive CHECK ((conversion_factor > (0)::numeric))
);


--
-- Name: units_unit_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.units_unit_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: units_unit_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.units_unit_id_seq OWNED BY public.units.unit_id;


--
-- Name: category category_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.category ALTER COLUMN category_id SET DEFAULT nextval('public.category_category_id_seq'::regclass);


--
-- Name: departments department_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.departments ALTER COLUMN department_id SET DEFAULT nextval('public.departments_department_id_seq'::regclass);


--
-- Name: goods_received_notes grn_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.goods_received_notes ALTER COLUMN grn_id SET DEFAULT nextval('public.goods_received_notes_grn_id_seq'::regclass);


--
-- Name: grn_items grn_item_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.grn_items ALTER COLUMN grn_item_id SET DEFAULT nextval('public.grn_items_grn_item_id_seq'::regclass);


--
-- Name: indent_items indent_item_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.indent_items ALTER COLUMN indent_item_id SET DEFAULT nextval('public.indent_items_indent_item_id_seq'::regclass);


--
-- Name: indents indent_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.indents ALTER COLUMN indent_id SET DEFAULT nextval('public.indents_indent_id_seq'::regclass);


--
-- Name: items item_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.items ALTER COLUMN item_id SET DEFAULT nextval('public.items_item_id_seq'::regclass);


--
-- Name: menu_items menu_item_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.menu_items ALTER COLUMN menu_item_id SET DEFAULT nextval('public.menu_items_menu_item_id_seq'::regclass);


--
-- Name: purchase_order_items po_item_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_order_items ALTER COLUMN po_item_id SET DEFAULT nextval('public.purchase_order_items_po_item_id_seq'::regclass);


--
-- Name: purchase_orders po_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_orders ALTER COLUMN po_id SET DEFAULT nextval('public.purchase_orders_po_id_seq'::regclass);


--
-- Name: recipe_items recipe_item_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.recipe_items ALTER COLUMN recipe_item_id SET DEFAULT nextval('public.recipe_items_recipe_item_id_seq'::regclass);


--
-- Name: recipes recipe_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.recipes ALTER COLUMN recipe_id SET DEFAULT nextval('public.recipes_recipe_id_seq'::regclass);


--
-- Name: stock_transactions transaction_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.stock_transactions ALTER COLUMN transaction_id SET DEFAULT nextval('public.stock_transactions_transaction_id_seq'::regclass);


--
-- Name: suppliers supplier_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.suppliers ALTER COLUMN supplier_id SET DEFAULT nextval('public.suppliers_supplier_id_seq'::regclass);


--
-- Name: units unit_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.units ALTER COLUMN unit_id SET DEFAULT nextval('public.units_unit_id_seq'::regclass);


--
-- Data for Name: auth_group; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.auth_group (id, name) FROM stdin;
\.


--
-- Data for Name: auth_group_permissions; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.auth_group_permissions (id, group_id, permission_id) FROM stdin;
\.


--
-- Data for Name: auth_permission; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.auth_permission (id, name, content_type_id, codename) FROM stdin;
1	Can add log entry	1	add_logentry
2	Can change log entry	1	change_logentry
3	Can delete log entry	1	delete_logentry
4	Can view log entry	1	view_logentry
5	Can add permission	2	add_permission
6	Can change permission	2	change_permission
7	Can delete permission	2	delete_permission
8	Can view permission	2	view_permission
9	Can add group	3	add_group
10	Can change group	3	change_group
11	Can delete group	3	delete_group
12	Can view group	3	view_group
13	Can add user	4	add_user
14	Can change user	4	change_user
15	Can delete user	4	delete_user
16	Can view user	4	view_user
17	Can add content type	5	add_contenttype
18	Can change content type	5	change_contenttype
19	Can delete content type	5	delete_contenttype
20	Can view content type	5	view_contenttype
21	Can add indent	6	add_indent
22	Can change indent	6	change_indent
23	Can delete indent	6	delete_indent
24	Can view indent	6	view_indent
25	Can add item	7	add_item
26	Can change item	7	change_item
27	Can delete item	7	delete_item
28	Can view item	7	view_item
29	Can add purchase order	8	add_purchaseorder
30	Can change purchase order	8	change_purchaseorder
31	Can delete purchase order	8	delete_purchaseorder
32	Can view purchase order	8	view_purchaseorder
33	Can add recipe	9	add_recipe
34	Can change recipe	9	change_recipe
35	Can delete recipe	9	delete_recipe
36	Can view recipe	9	view_recipe
37	Can add supplier	10	add_supplier
38	Can change supplier	10	change_supplier
39	Can delete supplier	10	delete_supplier
40	Can view supplier	10	view_supplier
41	Can add indent item	11	add_indentitem
42	Can change indent item	11	change_indentitem
43	Can delete indent item	11	delete_indentitem
44	Can view indent item	11	view_indentitem
45	Can add goods received note	12	add_goodsreceivednote
46	Can change goods received note	12	change_goodsreceivednote
47	Can delete goods received note	12	delete_goodsreceivednote
48	Can view goods received note	12	view_goodsreceivednote
49	Can add purchase order item	13	add_purchaseorderitem
50	Can change purchase order item	13	change_purchaseorderitem
51	Can delete purchase order item	13	delete_purchaseorderitem
52	Can view purchase order item	13	view_purchaseorderitem
53	Can add grn item	14	add_grnitem
54	Can change grn item	14	change_grnitem
55	Can delete grn item	14	delete_grnitem
56	Can view grn item	14	view_grnitem
57	Can add stock transaction	15	add_stocktransaction
58	Can change stock transaction	15	change_stocktransaction
59	Can delete stock transaction	15	delete_stocktransaction
60	Can view stock transaction	15	view_stocktransaction
61	Can add recipe component	16	add_recipecomponent
62	Can change recipe component	16	change_recipecomponent
63	Can delete recipe component	16	delete_recipecomponent
64	Can view recipe component	16	view_recipecomponent
\.


--
-- Data for Name: auth_user; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.auth_user (id, password, last_login, is_superuser, username, first_name, last_name, email, is_staff, is_active, date_joined) FROM stdin;
1	pbkdf2_sha256$600000$CtULylKmwWx65ZQnh7sxfM$UiL5UJxPZpP71EXXDABNdCN2rQ6Cfs8GTOYNvssBCFE=	\N	t	admin			arish@boteco.co.in	t	t	2025-08-25 12:03:39.205547+00
\.


--
-- Data for Name: auth_user_groups; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.auth_user_groups (id, user_id, group_id) FROM stdin;
\.


--
-- Data for Name: auth_user_user_permissions; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.auth_user_user_permissions (id, user_id, permission_id) FROM stdin;
\.


--
-- Data for Name: category; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.category (category_id, category, sub_category) FROM stdin;
1	Grocery	Juices And Purees
2	Perishable	Meat And Poultry
3	Liquor	Tequila
4	Grocery	Sweetener
5	Perishable	Seafood
6	Non Food	Packaging
7	Perishable	Meat and Poultry
8	Beer	Bottled Beer
9	Liquor	Vodka
10	Liquor	General
11	Grocery	Pasta
12	Wine	Rose Wine
13	Grocery	Flour
14	Uncategorized	General
15	Perishable	Beef
16	Grocery	Seeds
17	Wine	Sparkling Wine
18	Liquor	Rum
19	Liquor	Imported Whisky
20	Liquor	Gin
21	Liquor	Sake
22	Grocery	Canned And Packaged
23	Grocery	Dry Fruits And Nuts
24	Test	test
25	Liquor	Apertif
26	Wine	Port Wine
27	Non Food	Housekeeping
28	Beverage	Soft Drinks
29	Liquor	Whisky
30	Liquor	Liqueur
31	Perishable	Dairy
32	Wine	Red Wine
33	Grocery	Coffee And Tea
34	Perishable	Poultry
35	Grocery	Grains And Pulses
36	Non Food	Gas
37	Liquor	Soju
38	Perishable	Vegetables
39	Perishable	Fruits
40	Non Food	General
41	Beverage	Syrups And Puree
42	Grocery	Cereal
43	Non Food	Charcoal
44	Wine	White Wine
45	Beer	Craft Beer
46	Grocery	Oils And Sauces
47	Grocery	Baking
48	Liquor	Cooking Wine
49	Non Food	Stationary
50	Liquor	Brandy
51	testcat	General
52	Test Category	test
53	Grocery	Spices And Herbs
54	Perishable	General
55	Grocery	Water
56	Beverage	Juice
\.


--
-- Data for Name: departments; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.departments (permitted_departments, department_id) FROM stdin;
Maintenance	1
Bar	2
Admin	5
Housekeeping	6
Kitchen	7
\.


--
-- Data for Name: django_admin_log; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.django_admin_log (id, action_time, object_id, object_repr, action_flag, change_message, content_type_id, user_id) FROM stdin;
\.


--
-- Data for Name: django_content_type; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.django_content_type (id, app_label, model) FROM stdin;
1	admin	logentry
2	auth	permission
3	auth	group
4	auth	user
5	contenttypes	contenttype
6	inventory	indent
7	inventory	item
8	inventory	purchaseorder
9	inventory	recipe
10	inventory	supplier
11	inventory	indentitem
12	inventory	goodsreceivednote
13	inventory	purchaseorderitem
14	inventory	grnitem
15	inventory	stocktransaction
16	inventory	recipecomponent
\.


--
-- Data for Name: django_migrations; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.django_migrations (id, app, name, applied) FROM stdin;
1	contenttypes	0001_initial	2025-08-25 09:35:38.737323+00
2	auth	0001_initial	2025-08-25 09:35:40.792033+00
3	admin	0001_initial	2025-08-25 09:35:41.337135+00
4	admin	0002_logentry_remove_auto_add	2025-08-25 09:35:41.410315+00
5	admin	0003_logentry_add_action_flag_choices	2025-08-25 09:35:41.603877+00
6	contenttypes	0002_remove_content_type_name	2025-08-25 09:35:41.994719+00
7	auth	0002_alter_permission_name_max_length	2025-08-25 09:35:42.251863+00
8	auth	0003_alter_user_email_max_length	2025-08-25 09:35:42.507936+00
9	auth	0004_alter_user_username_opts	2025-08-25 09:35:42.638739+00
10	auth	0005_alter_user_last_login_null	2025-08-25 09:35:42.956735+00
11	auth	0006_require_contenttypes_0002	2025-08-25 09:35:43.082853+00
12	auth	0007_alter_validators_add_error_messages	2025-08-25 09:35:43.275483+00
13	auth	0008_alter_user_username_max_length	2025-08-25 09:35:43.601193+00
14	auth	0009_alter_user_last_name_max_length	2025-08-25 09:35:43.860619+00
15	auth	0010_alter_group_name_max_length	2025-08-25 09:35:44.117725+00
16	auth	0011_update_proxy_permissions	2025-08-25 09:35:44.249124+00
17	auth	0012_alter_user_first_name_max_length	2025-08-25 09:35:44.566956+00
18	inventory	0001_initial	2025-08-25 14:04:43.373758+00
21	inventory	0002_alter_grnitem_unit_price_at_receipt_and_more	2025-08-25 14:48:37.416861+00
22	inventory	0003_alter_item_current_stock_alter_item_reorder_point_and_more	2025-08-25 14:48:37.567158+00
\.


--
-- Data for Name: goods_received_notes; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.goods_received_notes (grn_id, grn_number, po_id, supplier_id, received_date, notes, created_at, received_by_id) FROM stdin;
\.


--
-- Data for Name: grn_items; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.grn_items (grn_item_id, grn_id, item_id, po_item_id, quantity_ordered_on_po, quantity_received, unit_price_at_receipt, notes) FROM stdin;
\.


--
-- Data for Name: indent_items; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.indent_items (indent_item_id, indent_id, item_id, requested_qty, notes, fulfilled_qty, issued_qty, item_status) FROM stdin;
\.


--
-- Data for Name: indents; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.indents (indent_id, mrn, requested_by, date_required, date_submitted, status, notes, date_processed, created_at, updated_at, department_id, processed_by_id) FROM stdin;
\.


--
-- Data for Name: item_departments; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.item_departments (item_id, department_id) FROM stdin;
\.


--
-- Data for Name: items; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.items (item_id, name, reorder_point, current_stock, notes, is_active, updated_at, category_id_ref, unit_id) FROM stdin;
\.


--
-- Data for Name: menu_items; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.menu_items (menu_item_id, item_id, is_active, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: purchase_order_items; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.purchase_order_items (po_item_id, po_id, item_id, quantity_ordered, unit_price, line_total) FROM stdin;
\.


--
-- Data for Name: purchase_orders; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.purchase_orders (po_id, po_number, supplier_id, order_date, expected_delivery_date, status, total_amount, notes, created_at, updated_at, created_by_id, updated_by_id) FROM stdin;
\.


--
-- Data for Name: recipe_items; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.recipe_items (recipe_item_id, recipe_id, item_id, quantity, created_at, updated_at, child_recipe_id, unit, loss_pct, sort_order, notes) FROM stdin;
\.


--
-- Data for Name: recipes; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.recipes (recipe_id, name, description, is_active, created_at, updated_at, type, default_yield_qty, default_yield_unit, plating_notes, tags, version, effective_from, effective_to) FROM stdin;
\.


--
-- Data for Name: sales_transactions; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.sales_transactions (sale_id, quantity, user_id, notes, sale_date, recipe_id) FROM stdin;
\.


--
-- Data for Name: stock_transactions; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.stock_transactions (transaction_id, item_id, quantity_change, transaction_type, transaction_date, user_id, related_po_id, notes, related_indent_id, user_id_int) FROM stdin;
\.


--
-- Data for Name: suppliers; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.suppliers (supplier_id, name, contact_person, phone, email, address, notes, is_active, updated_at) FROM stdin;
1	Zomato Hyperpure	Admin	9823188642	arish@boteco.co.in	C-704, Ganga Liviano, Kharadkar Park Lane, Pune	\N	t	\N
4	123	Arish Taraporewala	09823188642	arisht@gmail.com	C-704, Ganga Liviano, Kharadkar Park Lane, Kharadi	Noteew	t	\N
5	1234	Arish Taraporewala	\N	arish@boteco.co.in	\N	test	t	2025-05-16 09:24:34.154173
8	A1 Foods	Test Name	9823188642	arisht@gmail.com	C-704, Ganga Liviano, Kharadkar Park Lane, Kharadi	Imported Foods	t	\N
7	Malganga	Mal	09823188642	arisht@gmail.com	\N	test note	t	2025-05-17 13:49:42.557274
9	Steaks & More	Arish Taraporewala	\N	arisht@gmail.com	C-704, Ganga Liviano, Kharadkar Park Lane, Kharadi	test	t	2025-05-17 13:49:40.963517
6	Test1	Arish Taraporewala	\N	arisht@gmail.com	\N	a	t	\N
2	Test Supplier	Admin	1	arish@boteco.co.in	Lijndenweg 32A	\N	t	\N
3	test supplier 1	admin	1234	arish@boteco.co.in	Lijndenweg 32A	test again	t	\N
\.


--
-- Data for Name: units; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.units (purchase_unit, base_unit, conversion_factor, unit_id) FROM stdin;
2 KG	GM	2000.000000	1
50 GM PKT	GM	50.000000	2
BOX 400 GM	GM	400.000000	3
BOX 565 GM	GM	565.000000	4
BTL 1.6KG	GM	1600.000000	5
BTL 100 GM	GM	100.000000	6
BTL 350 GM	GM	350.000000	7
BTL 370 GM	GM	370.000000	8
BTL 415 GM	GM	415.000000	9
BTL 510 GM	GM	510.000000	10
BTL 680 GM (DW 360 GM)	GM	360.000000	11
BTL 980GM	GM	980.000000	12
BUNCH 200 GM	GM	200.000000	13
BUNCH 250 GM	GM	250.000000	14
BUNCH 250 GM DILL	GM	250.000000	15
BUNCH(200 GM)	GM	200.000000	16
GM	GM	1.000000	17
JAR 2 KG	GM	2000.000000	18
KG	GM	1000.000000	19
PC 150 GM	GM	150.000000	20
PC 300 GM	GM	300.000000	21
PIECE 300 GM	GM	300.000000	22
PKT 100 GM	GM	100.000000	23
PKT 2.5 KG	GM	2500.000000	24
PKT 200 GM	GM	200.000000	25
PKT 25 GM (5 SHEETS)	GM	5.000000	26
PKT 250 GM	GM	250.000000	27
PKT 400 GM	GM	400.000000	28
PKT 450 GM	GM	450.000000	29
PKT 500 GM	GM	500.000000	30
PKT 65 GM	GM	65.000000	31
PKT 750 GM	GM	750.000000	32
PKT 900 GM	GM	900.000000	33
SACHET(1 GM)	GM	1.000000	34
TIN 185 GM	GM	185.000000	35
TIN 400 GM	GM	400.000000	36
TIN 850 GM	GM	850.000000	37
750ML	ML	750.000000	38
BTL 1 LT	ML	1000.000000	39
BTL 290 ML	ML	290.000000	40
BTL 473 ML	ML	473.000000	41
BTL 500 ML	ML	500.000000	42
BTL 60 ML	ML	60.000000	43
BTL 700 ML	ML	700.000000	44
BTL 750 ML	ML	750.000000	45
BTL 793 ML	ML	793.000000	46
CAN 15 LT	ML	15000.000000	47
CAN 5 LT	ML	5000.000000	48
LT	ML	1000.000000	49
PKT 1 LT	ML	1000.000000	50
PKT 2 LT	ML	2000.000000	51
TIN 400 ML	ML	400.000000	52
HANK	MT	91.000000	53
BOX 50 PC	PC	50.000000	54
PC	PC	1.000000	55
\.


--
-- Name: auth_group_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.auth_group_id_seq', 1, false);


--
-- Name: auth_group_permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.auth_group_permissions_id_seq', 1, false);


--
-- Name: auth_permission_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.auth_permission_id_seq', 64, true);


--
-- Name: auth_user_groups_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.auth_user_groups_id_seq', 1, false);


--
-- Name: auth_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.auth_user_id_seq', 1, true);


--
-- Name: auth_user_user_permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.auth_user_user_permissions_id_seq', 1, false);


--
-- Name: category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.category_category_id_seq', 56, true);


--
-- Name: departments_department_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.departments_department_id_seq', 7, true);


--
-- Name: django_admin_log_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.django_admin_log_id_seq', 1, false);


--
-- Name: django_content_type_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.django_content_type_id_seq', 16, true);


--
-- Name: django_migrations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.django_migrations_id_seq', 22, true);


--
-- Name: goods_received_notes_grn_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.goods_received_notes_grn_id_seq', 1, false);


--
-- Name: grn_items_grn_item_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.grn_items_grn_item_id_seq', 1, false);


--
-- Name: grn_sequence; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.grn_sequence', 1030, true);


--
-- Name: indent_items_indent_item_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.indent_items_indent_item_id_seq', 1, false);


--
-- Name: indents_indent_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.indents_indent_id_seq', 1, false);


--
-- Name: items_item_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.items_item_id_seq', 1, false);


--
-- Name: menu_items_menu_item_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.menu_items_menu_item_id_seq', 1, false);


--
-- Name: mrn_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.mrn_seq', 74, true);


--
-- Name: po_sequence; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.po_sequence', 13, true);


--
-- Name: purchase_order_items_po_item_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.purchase_order_items_po_item_id_seq', 1, false);


--
-- Name: purchase_orders_po_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.purchase_orders_po_id_seq', 1, false);


--
-- Name: recipe_items_recipe_item_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.recipe_items_recipe_item_id_seq', 1, false);


--
-- Name: recipes_recipe_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.recipes_recipe_id_seq', 1, false);


--
-- Name: sales_transactions_sale_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.sales_transactions_sale_id_seq', 1, false);


--
-- Name: stock_transactions_transaction_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.stock_transactions_transaction_id_seq', 1, false);


--
-- Name: suppliers_supplier_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.suppliers_supplier_id_seq', 9, true);


--
-- Name: units_unit_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.units_unit_id_seq', 60, true);


--
-- Name: auth_group auth_group_name_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_group
    ADD CONSTRAINT auth_group_name_key UNIQUE (name);


--
-- Name: auth_group_permissions auth_group_permissions_group_id_permission_id_0cd325b0_uniq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_group_id_permission_id_0cd325b0_uniq UNIQUE (group_id, permission_id);


--
-- Name: auth_group_permissions auth_group_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_pkey PRIMARY KEY (id);


--
-- Name: auth_group auth_group_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_group
    ADD CONSTRAINT auth_group_pkey PRIMARY KEY (id);


--
-- Name: auth_permission auth_permission_content_type_id_codename_01ab375a_uniq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_content_type_id_codename_01ab375a_uniq UNIQUE (content_type_id, codename);


--
-- Name: auth_permission auth_permission_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_pkey PRIMARY KEY (id);


--
-- Name: auth_user_groups auth_user_groups_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_pkey PRIMARY KEY (id);


--
-- Name: auth_user_groups auth_user_groups_user_id_group_id_94350c0c_uniq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_user_id_group_id_94350c0c_uniq UNIQUE (user_id, group_id);


--
-- Name: auth_user auth_user_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_user
    ADD CONSTRAINT auth_user_pkey PRIMARY KEY (id);


--
-- Name: auth_user_user_permissions auth_user_user_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permissions_pkey PRIMARY KEY (id);


--
-- Name: auth_user_user_permissions auth_user_user_permissions_user_id_permission_id_14a6b632_uniq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permissions_user_id_permission_id_14a6b632_uniq UNIQUE (user_id, permission_id);


--
-- Name: auth_user auth_user_username_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_user
    ADD CONSTRAINT auth_user_username_key UNIQUE (username);


--
-- Name: category category_pkey1; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_pkey1 PRIMARY KEY (category_id);


--
-- Name: category category_unique_pair; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_unique_pair UNIQUE (category, sub_category);


--
-- Name: departments departments_name_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.departments
    ADD CONSTRAINT departments_name_key UNIQUE (permitted_departments);


--
-- Name: departments departments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.departments
    ADD CONSTRAINT departments_pkey PRIMARY KEY (department_id);


--
-- Name: django_admin_log django_admin_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_pkey PRIMARY KEY (id);


--
-- Name: django_content_type django_content_type_app_label_model_76bd3d3b_uniq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.django_content_type
    ADD CONSTRAINT django_content_type_app_label_model_76bd3d3b_uniq UNIQUE (app_label, model);


--
-- Name: django_content_type django_content_type_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.django_content_type
    ADD CONSTRAINT django_content_type_pkey PRIMARY KEY (id);


--
-- Name: django_migrations django_migrations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.django_migrations
    ADD CONSTRAINT django_migrations_pkey PRIMARY KEY (id);


--
-- Name: goods_received_notes goods_received_notes_grn_number_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.goods_received_notes
    ADD CONSTRAINT goods_received_notes_grn_number_key UNIQUE (grn_number);


--
-- Name: goods_received_notes goods_received_notes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.goods_received_notes
    ADD CONSTRAINT goods_received_notes_pkey PRIMARY KEY (grn_id);


--
-- Name: grn_items grn_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.grn_items
    ADD CONSTRAINT grn_items_pkey PRIMARY KEY (grn_item_id);


--
-- Name: grn_items grn_items_unique; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.grn_items
    ADD CONSTRAINT grn_items_unique UNIQUE (grn_id, po_item_id);


--
-- Name: indent_items indent_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.indent_items
    ADD CONSTRAINT indent_items_pkey PRIMARY KEY (indent_item_id);


--
-- Name: indents indents_mrn_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.indents
    ADD CONSTRAINT indents_mrn_key UNIQUE (mrn);


--
-- Name: indents indents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.indents
    ADD CONSTRAINT indents_pkey PRIMARY KEY (indent_id);


--
-- Name: item_departments item_departments_un; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item_departments
    ADD CONSTRAINT item_departments_un UNIQUE (item_id, department_id);


--
-- Name: items items_name_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.items
    ADD CONSTRAINT items_name_key UNIQUE (name);


--
-- Name: items items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.items
    ADD CONSTRAINT items_pkey PRIMARY KEY (item_id);


--
-- Name: menu_items menu_items_item_id_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.menu_items
    ADD CONSTRAINT menu_items_item_id_key UNIQUE (item_id);


--
-- Name: menu_items menu_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.menu_items
    ADD CONSTRAINT menu_items_pkey PRIMARY KEY (menu_item_id);


--
-- Name: purchase_order_items po_items_unique; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_order_items
    ADD CONSTRAINT po_items_unique UNIQUE (po_id, item_id);


--
-- Name: purchase_order_items purchase_order_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_order_items
    ADD CONSTRAINT purchase_order_items_pkey PRIMARY KEY (po_item_id);


--
-- Name: purchase_orders purchase_orders_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_orders
    ADD CONSTRAINT purchase_orders_pkey PRIMARY KEY (po_id);


--
-- Name: purchase_orders purchase_orders_po_number_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_orders
    ADD CONSTRAINT purchase_orders_po_number_key UNIQUE (po_number);


--
-- Name: recipe_items recipe_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.recipe_items
    ADD CONSTRAINT recipe_items_pkey PRIMARY KEY (recipe_item_id);


--
-- Name: recipe_items recipe_items_recipe_id_item_id_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.recipe_items
    ADD CONSTRAINT recipe_items_recipe_id_item_id_key UNIQUE (recipe_id, item_id);


--
-- Name: recipes recipes_name_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.recipes
    ADD CONSTRAINT recipes_name_key UNIQUE (name);


--
-- Name: recipes recipes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.recipes
    ADD CONSTRAINT recipes_pkey PRIMARY KEY (recipe_id);


--
-- Name: sales_transactions sales_transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.sales_transactions
    ADD CONSTRAINT sales_transactions_pkey PRIMARY KEY (sale_id);


--
-- Name: stock_transactions stock_transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.stock_transactions
    ADD CONSTRAINT stock_transactions_pkey PRIMARY KEY (transaction_id);


--
-- Name: suppliers suppliers_name_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.suppliers
    ADD CONSTRAINT suppliers_name_key UNIQUE (name);


--
-- Name: suppliers suppliers_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.suppliers
    ADD CONSTRAINT suppliers_pkey PRIMARY KEY (supplier_id);


--
-- Name: units units_base_purchase_uk; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.units
    ADD CONSTRAINT units_base_purchase_uk UNIQUE (base_unit, purchase_unit);


--
-- Name: units units_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.units
    ADD CONSTRAINT units_pkey PRIMARY KEY (unit_id);


--
-- Name: units units_unique_triplet; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.units
    ADD CONSTRAINT units_unique_triplet UNIQUE (purchase_unit, base_unit, conversion_factor);


--
-- Name: auth_group_name_a6ea08ec_like; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX auth_group_name_a6ea08ec_like ON public.auth_group USING btree (name varchar_pattern_ops);


--
-- Name: auth_group_permissions_group_id_b120cbf9; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX auth_group_permissions_group_id_b120cbf9 ON public.auth_group_permissions USING btree (group_id);


--
-- Name: auth_group_permissions_permission_id_84c5c92e; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX auth_group_permissions_permission_id_84c5c92e ON public.auth_group_permissions USING btree (permission_id);


--
-- Name: auth_permission_content_type_id_2f476e4b; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX auth_permission_content_type_id_2f476e4b ON public.auth_permission USING btree (content_type_id);


--
-- Name: auth_user_groups_group_id_97559544; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX auth_user_groups_group_id_97559544 ON public.auth_user_groups USING btree (group_id);


--
-- Name: auth_user_groups_user_id_6a12ed8b; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX auth_user_groups_user_id_6a12ed8b ON public.auth_user_groups USING btree (user_id);


--
-- Name: auth_user_user_permissions_permission_id_1fbb5f2c; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX auth_user_user_permissions_permission_id_1fbb5f2c ON public.auth_user_user_permissions USING btree (permission_id);


--
-- Name: auth_user_user_permissions_user_id_a95ead1b; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX auth_user_user_permissions_user_id_a95ead1b ON public.auth_user_user_permissions USING btree (user_id);


--
-- Name: auth_user_username_6821ab7c_like; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX auth_user_username_6821ab7c_like ON public.auth_user USING btree (username varchar_pattern_ops);


--
-- Name: django_admin_log_content_type_id_c4bce8eb; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX django_admin_log_content_type_id_c4bce8eb ON public.django_admin_log USING btree (content_type_id);


--
-- Name: django_admin_log_user_id_c564eba6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX django_admin_log_user_id_c564eba6 ON public.django_admin_log USING btree (user_id);


--
-- Name: idx_category_category; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_category_category ON public.category USING btree (category);


--
-- Name: idx_category_sub_category; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_category_sub_category ON public.category USING btree (sub_category);


--
-- Name: idx_grn_po_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_grn_po_id ON public.goods_received_notes USING btree (po_id);


--
-- Name: idx_grn_received_date; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_grn_received_date ON public.goods_received_notes USING btree (received_date);


--
-- Name: idx_grn_supplier_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_grn_supplier_id ON public.goods_received_notes USING btree (supplier_id);


--
-- Name: idx_grni_grn_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_grni_grn_id ON public.grn_items USING btree (grn_id);


--
-- Name: idx_grni_item_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_grni_item_id ON public.grn_items USING btree (item_id);


--
-- Name: idx_grni_po_item_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_grni_po_item_id ON public.grn_items USING btree (po_item_id);


--
-- Name: idx_indent_items_indent_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_indent_items_indent_id ON public.indent_items USING btree (indent_id);


--
-- Name: idx_indent_items_item_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_indent_items_item_id ON public.indent_items USING btree (item_id);


--
-- Name: idx_indents_date_submitted; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_indents_date_submitted ON public.indents USING btree (date_submitted);


--
-- Name: idx_indents_department_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_indents_department_id ON public.indents USING btree (department_id);


--
-- Name: idx_indents_processed_by; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_indents_processed_by ON public.indents USING btree (processed_by_id);


--
-- Name: idx_indents_requested_by; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_indents_requested_by ON public.indents USING btree (requested_by);


--
-- Name: idx_items_category_id_ref; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_items_category_id_ref ON public.items USING btree (category_id_ref);


--
-- Name: idx_items_unit_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_items_unit_id ON public.items USING btree (unit_id);


--
-- Name: idx_po_order_date; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_po_order_date ON public.purchase_orders USING btree (order_date);


--
-- Name: idx_po_status; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_po_status ON public.purchase_orders USING btree (status);


--
-- Name: idx_po_supplier_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_po_supplier_id ON public.purchase_orders USING btree (supplier_id);


--
-- Name: idx_poi_item_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_poi_item_id ON public.purchase_order_items USING btree (item_id);


--
-- Name: idx_poi_po_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_poi_po_id ON public.purchase_order_items USING btree (po_id);


--
-- Name: idx_recipe_items_child_recipe_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_recipe_items_child_recipe_id ON public.recipe_items USING btree (child_recipe_id);


--
-- Name: idx_recipe_items_item_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_recipe_items_item_id ON public.recipe_items USING btree (item_id);


--
-- Name: idx_recipe_items_recipe_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_recipe_items_recipe_id ON public.recipe_items USING btree (recipe_id);


--
-- Name: idx_st_item_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_st_item_id ON public.stock_transactions USING btree (item_id);


--
-- Name: idx_st_related_indent_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_st_related_indent_id ON public.stock_transactions USING btree (related_indent_id);


--
-- Name: idx_st_related_po_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_st_related_po_id ON public.stock_transactions USING btree (related_po_id);


--
-- Name: idx_stock_transactions_date; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_stock_transactions_date ON public.stock_transactions USING btree (transaction_date);


--
-- Name: idx_stock_transactions_item_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_stock_transactions_item_id ON public.stock_transactions USING btree (item_id);


--
-- Name: idx_units_base_unit; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_units_base_unit ON public.units USING btree (base_unit);


--
-- Name: sales_transactions_recipe_id_13a1760f; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX sales_transactions_recipe_id_13a1760f ON public.sales_transactions USING btree (recipe_id);


--
-- Name: purchase_orders update_purchase_orders_modtime; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER update_purchase_orders_modtime BEFORE UPDATE ON public.purchase_orders FOR EACH ROW EXECUTE FUNCTION public.update_modified_column();


--
-- Name: auth_group_permissions auth_group_permissio_permission_id_84c5c92e_fk_auth_perm; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissio_permission_id_84c5c92e_fk_auth_perm FOREIGN KEY (permission_id) REFERENCES public.auth_permission(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_group_permissions auth_group_permissions_group_id_b120cbf9_fk_auth_group_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_group_id_b120cbf9_fk_auth_group_id FOREIGN KEY (group_id) REFERENCES public.auth_group(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_permission auth_permission_content_type_id_2f476e4b_fk_django_co; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_content_type_id_2f476e4b_fk_django_co FOREIGN KEY (content_type_id) REFERENCES public.django_content_type(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_user_groups auth_user_groups_group_id_97559544_fk_auth_group_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_group_id_97559544_fk_auth_group_id FOREIGN KEY (group_id) REFERENCES public.auth_group(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_user_groups auth_user_groups_user_id_6a12ed8b_fk_auth_user_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_user_id_6a12ed8b_fk_auth_user_id FOREIGN KEY (user_id) REFERENCES public.auth_user(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_user_user_permissions auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm FOREIGN KEY (permission_id) REFERENCES public.auth_permission(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_user_user_permissions auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id FOREIGN KEY (user_id) REFERENCES public.auth_user(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: django_admin_log django_admin_log_content_type_id_c4bce8eb_fk_django_co; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_content_type_id_c4bce8eb_fk_django_co FOREIGN KEY (content_type_id) REFERENCES public.django_content_type(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: django_admin_log django_admin_log_user_id_c564eba6_fk_auth_user_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_user_id_c564eba6_fk_auth_user_id FOREIGN KEY (user_id) REFERENCES public.auth_user(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: goods_received_notes goods_received_notes_po_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.goods_received_notes
    ADD CONSTRAINT goods_received_notes_po_id_fkey FOREIGN KEY (po_id) REFERENCES public.purchase_orders(po_id);


--
-- Name: goods_received_notes goods_received_notes_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.goods_received_notes
    ADD CONSTRAINT goods_received_notes_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(supplier_id);


--
-- Name: grn_items grn_items_grn_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.grn_items
    ADD CONSTRAINT grn_items_grn_id_fkey FOREIGN KEY (grn_id) REFERENCES public.goods_received_notes(grn_id) ON DELETE CASCADE;


--
-- Name: grn_items grn_items_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.grn_items
    ADD CONSTRAINT grn_items_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.items(item_id);


--
-- Name: grn_items grn_items_po_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.grn_items
    ADD CONSTRAINT grn_items_po_item_id_fkey FOREIGN KEY (po_item_id) REFERENCES public.purchase_order_items(po_item_id);


--
-- Name: goods_received_notes grn_received_by_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.goods_received_notes
    ADD CONSTRAINT grn_received_by_fk FOREIGN KEY (received_by_id) REFERENCES public.auth_user(id);


--
-- Name: indent_items indent_items_indent_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.indent_items
    ADD CONSTRAINT indent_items_indent_id_fkey FOREIGN KEY (indent_id) REFERENCES public.indents(indent_id) ON DELETE CASCADE;


--
-- Name: indent_items indent_items_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.indent_items
    ADD CONSTRAINT indent_items_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.items(item_id);


--
-- Name: indents indents_department_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.indents
    ADD CONSTRAINT indents_department_fk FOREIGN KEY (department_id) REFERENCES public.departments(department_id) DEFERRABLE;


--
-- Name: indents indents_processed_by_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.indents
    ADD CONSTRAINT indents_processed_by_fk FOREIGN KEY (processed_by_id) REFERENCES public.auth_user(id);


--
-- Name: item_departments item_departments_department_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item_departments
    ADD CONSTRAINT item_departments_department_id_fkey FOREIGN KEY (department_id) REFERENCES public.departments(department_id) ON DELETE CASCADE;


--
-- Name: item_departments item_departments_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item_departments
    ADD CONSTRAINT item_departments_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.items(item_id) ON DELETE CASCADE;


--
-- Name: items items_category_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.items
    ADD CONSTRAINT items_category_fk FOREIGN KEY (category_id_ref) REFERENCES public.category(category_id) ON DELETE SET NULL;


--
-- Name: items items_unit_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.items
    ADD CONSTRAINT items_unit_fk FOREIGN KEY (unit_id) REFERENCES public.units(unit_id) DEFERRABLE;


--
-- Name: menu_items menu_items_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.menu_items
    ADD CONSTRAINT menu_items_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.items(item_id);


--
-- Name: purchase_orders po_created_by_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_orders
    ADD CONSTRAINT po_created_by_fk FOREIGN KEY (created_by_id) REFERENCES public.auth_user(id);


--
-- Name: purchase_orders po_updated_by_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_orders
    ADD CONSTRAINT po_updated_by_fk FOREIGN KEY (updated_by_id) REFERENCES public.auth_user(id);


--
-- Name: purchase_order_items purchase_order_items_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_order_items
    ADD CONSTRAINT purchase_order_items_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.items(item_id);


--
-- Name: purchase_order_items purchase_order_items_po_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_order_items
    ADD CONSTRAINT purchase_order_items_po_id_fkey FOREIGN KEY (po_id) REFERENCES public.purchase_orders(po_id) ON DELETE CASCADE;


--
-- Name: purchase_orders purchase_orders_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.purchase_orders
    ADD CONSTRAINT purchase_orders_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(supplier_id);


--
-- Name: recipe_items recipe_items_child_recipe_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.recipe_items
    ADD CONSTRAINT recipe_items_child_recipe_fk FOREIGN KEY (child_recipe_id) REFERENCES public.recipes(recipe_id);


--
-- Name: recipe_items recipe_items_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.recipe_items
    ADD CONSTRAINT recipe_items_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.items(item_id);


--
-- Name: recipe_items recipe_items_recipe_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.recipe_items
    ADD CONSTRAINT recipe_items_recipe_id_fkey FOREIGN KEY (recipe_id) REFERENCES public.recipes(recipe_id) ON DELETE CASCADE;


--
-- Name: sales_transactions sales_transactions_recipe_id_13a1760f_fk_recipes_recipe_id; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.sales_transactions
    ADD CONSTRAINT sales_transactions_recipe_id_13a1760f_fk_recipes_recipe_id FOREIGN KEY (recipe_id) REFERENCES public.recipes(recipe_id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: stock_transactions stock_transactions_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.stock_transactions
    ADD CONSTRAINT stock_transactions_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.items(item_id);


--
-- Name: stock_transactions stock_tx_indent_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.stock_transactions
    ADD CONSTRAINT stock_tx_indent_fk FOREIGN KEY (related_indent_id) REFERENCES public.indents(indent_id) DEFERRABLE;


--
-- Name: stock_transactions stock_tx_po_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.stock_transactions
    ADD CONSTRAINT stock_tx_po_fk FOREIGN KEY (related_po_id) REFERENCES public.purchase_orders(po_id) DEFERRABLE;


--
-- Name: stock_transactions stock_tx_user_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.stock_transactions
    ADD CONSTRAINT stock_tx_user_fk FOREIGN KEY (user_id_int) REFERENCES public.auth_user(id);


--
-- Name: auth_group; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.auth_group ENABLE ROW LEVEL SECURITY;

--
-- Name: auth_group_permissions; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.auth_group_permissions ENABLE ROW LEVEL SECURITY;

--
-- Name: auth_permission; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.auth_permission ENABLE ROW LEVEL SECURITY;

--
-- Name: auth_user; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.auth_user ENABLE ROW LEVEL SECURITY;

--
-- Name: auth_user_groups; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.auth_user_groups ENABLE ROW LEVEL SECURITY;

--
-- Name: auth_user_user_permissions; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.auth_user_user_permissions ENABLE ROW LEVEL SECURITY;

--
-- Name: category; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.category ENABLE ROW LEVEL SECURITY;

--
-- Name: departments; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.departments ENABLE ROW LEVEL SECURITY;

--
-- Name: django_admin_log; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.django_admin_log ENABLE ROW LEVEL SECURITY;

--
-- Name: django_content_type; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.django_content_type ENABLE ROW LEVEL SECURITY;

--
-- Name: django_migrations; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.django_migrations ENABLE ROW LEVEL SECURITY;

--
-- Name: goods_received_notes; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.goods_received_notes ENABLE ROW LEVEL SECURITY;

--
-- Name: grn_items; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.grn_items ENABLE ROW LEVEL SECURITY;

--
-- Name: indent_items; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.indent_items ENABLE ROW LEVEL SECURITY;

--
-- Name: indents; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.indents ENABLE ROW LEVEL SECURITY;

--
-- Name: item_departments; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.item_departments ENABLE ROW LEVEL SECURITY;

--
-- Name: items; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.items ENABLE ROW LEVEL SECURITY;

--
-- Name: menu_items; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.menu_items ENABLE ROW LEVEL SECURITY;

--
-- Name: purchase_order_items; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.purchase_order_items ENABLE ROW LEVEL SECURITY;

--
-- Name: purchase_orders; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.purchase_orders ENABLE ROW LEVEL SECURITY;

--
-- Name: recipe_items; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.recipe_items ENABLE ROW LEVEL SECURITY;

--
-- Name: recipes; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.recipes ENABLE ROW LEVEL SECURITY;

--
-- Name: stock_transactions; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.stock_transactions ENABLE ROW LEVEL SECURITY;

--
-- Name: suppliers; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.suppliers ENABLE ROW LEVEL SECURITY;

--
-- Name: units; Type: ROW SECURITY; Schema: public; Owner: -
--

ALTER TABLE public.units ENABLE ROW LEVEL SECURITY;

--
-- PostgreSQL database dump complete
--

\unrestrict iAChTaQMloVM4m8iSeEs2WsXeY7waZfEtCWoP3QYxsMl1sBLIwrcFpvUkpJSwvx

