{% extends "components/detail_layout.html" %}
{% block title %}Indent Detail â€“ Inventory App{% endblock %}
{% block heading %}Indent {{ indent.indent_id }}{% endblock %}
{% block actions %}
  <a href="{% url 'indent_pdf' indent.indent_id %}" class="btn-outline">Download PDF</a>
  <a href="{% url 'indents_list' %}" class="btn-outline">Back</a>
{% endblock %}
{% block detail_table %}
  {% include "components/detail_table.html" with rows=rows %}
{% endblock %}
{% block extra_tables %}
  <h2 class="text-xl mb-4 mt-8">Items</h2>
  <table class="table">
    <thead><tr><th>Item</th><th>Qty</th></tr></thead>
    <tbody>
    {% for row in items %}
      <tr><td>{{ row.item.name }}</td><td>{{ row.requested_qty }}</td></tr>
    {% endfor %}
    </tbody>
  </table>
  <div class="mt-4 flex gap-2">
    <form action="{% url 'indent_update_status' indent.indent_id 'PROCESSING' %}" method="post" class="inline">
      {% csrf_token %}
      <button type="submit" class="btn-outline">Mark Processing</button>
    </form>
    <form action="{% url 'indent_update_status' indent.indent_id 'COMPLETED' %}" method="post" class="inline">
      {% csrf_token %}
      <button type="submit" class="btn-outline">Mark Completed</button>
    </form>
    <form action="{% url 'indent_update_status' indent.indent_id 'CANCELLED' %}" method="post" class="inline">
      {% csrf_token %}
      <button type="submit" class="btn-danger">Cancel</button>
    </form>
  </div>
{% endblock %}
