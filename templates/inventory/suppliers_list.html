{% extends "_base.html" %}
{% block content %}
<div class="max-w-5xl mx-auto p-4">
  <h1 class="text-2xl font-semibold mb-4">Suppliers ({{ total_suppliers }})</h1>
  <div class="mb-4 flex justify-end gap-2">
    <a href="{% url 'supplier_create' %}" class="btn-primary">Add Supplier</a>
    <a href="{% url 'suppliers_bulk_upload' %}" class="btn-secondary">Bulk Upload</a>
    <a href="{% url 'suppliers_bulk_delete' %}" class="btn-danger">Bulk Delete</a>
  </div>
  <form id="filters" class="grid gap-2 mb-4 sm:grid-cols-2 md:grid-cols-4">
      <input
        type="text"
        name="q"
        placeholder="Search suppliers..."
        class="form-control w-full"
        value="{{ q }}"
        hx-get="{% url 'suppliers_table' %}"
        hx-target="#suppliers_table"
        hx-trigger="keyup changed delay:300ms"
        hx-include="#filters"
      />
      <select name="active" class="form-control w-full"
              hx-get="{% url 'suppliers_table' %}" hx-target="#suppliers_table" hx-trigger="change" hx-include="#filters">
        <option value="">All</option>
        <option value="1" {% if active == '1' %}selected{% endif %}>Active</option>
        <option value="0" {% if active == '0' %}selected{% endif %}>Inactive</option>
      </select>
      <input type="hidden" name="page_size" value="{{ page_size|default:25 }}">
      <input type="hidden" name="sort" value="{{ sort|default:'name' }}">
      <input type="hidden" name="direction" value="{{ direction|default:'asc' }}">
      <button type="submit" name="export" value="1" formaction="{% url 'suppliers_table' %}" formmethod="get" class="btn-secondary w-full">Export</button>
  </form>
  <div id="suppliers_table"
       hx-get="{% url 'suppliers_table' %}"
       hx-trigger="load"
       hx-include="#filters">
    {% if total_suppliers == 0 %}
      {% url 'supplier_create' as supplier_create_url %}
      {% include "components/empty_state.html" with title="No Suppliers" message="Start by adding your first supplier." cta_label="Add Supplier" cta_url=supplier_create_url %}
    {% endif %}
  </div>
</div>
{% endblock %}

