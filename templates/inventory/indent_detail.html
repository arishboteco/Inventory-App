{% extends "_base.html" %}
{% block content %}
<div class="max-w-3xl mx-auto p-4">
  <h1 class="text-2xl font-semibold mb-4">Indent {{ indent.indent_id }}</h1>
  <div class="mb-2">Status: <span class="px-2 py-1 rounded {{ badges[indent.status|upper] }}">{{ indent.status }}</span></div>
  <div class="mb-2">Requested By: {{ indent.requested_by }}</div>
  <div class="mb-2">Department: {{ indent.department }}</div>
  <div class="mb-4">
    <a href="{% url 'indent_pdf' indent.indent_id %}" class="text-blue-600">Download PDF</a>
  </div>
  <h2 class="text-xl font-semibold mb-2">Items</h2>
  <table class="table">
    <thead><tr><th>Item</th><th>Qty</th></tr></thead>
    <tbody>
    {% for row in items %}
      <tr><td>{{ row.item.name }}</td><td>{{ row.requested_qty }}</td></tr>
    {% endfor %}
    </tbody>
  </table>
  <div class="mt-4 flex gap-2">
    <form action="{% url 'indent_update_status' indent.indent_id 'PROCESSING' %}" method="post" class="inline">
      {% csrf_token %}
      <button type="submit" class="px-3 py-2 border rounded">Mark Processing</button>
    </form>
    <form action="{% url 'indent_update_status' indent.indent_id 'COMPLETED' %}" method="post" class="inline">
      {% csrf_token %}
      <button type="submit" class="px-3 py-2 border rounded">Mark Completed</button>
    </form>
    <form action="{% url 'indent_update_status' indent.indent_id 'CANCELLED' %}" method="post" class="inline">
      {% csrf_token %}
      <button type="submit" class="px-3 py-2 border rounded">Cancel</button>
    </form>
  </div>
</div>
{% endblock %}
