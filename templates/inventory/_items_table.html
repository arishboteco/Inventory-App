<div class="overflow-x-auto">
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Base Unit</th>
        <th>Category</th>
        <th>Subcategory</th>
        <th>Current Stock</th>
        <th>Reorder Point</th>
        <th>Active</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for row in page_obj %}
      <tr>
        <td>{{ row.item_id }}</td>
        <td>{{ row.name }}</td>
        <td>{{ row.base_unit }}</td>
        <td>{{ row.category }}</td>
        <td>{{ row.sub_category }}</td>
        <td class="text-right">{{ row.current_stock }}</td>
        <td class="text-right">{{ row.reorder_point }}</td>
        <td>{{ row.is_active }}</td>
        <td><a href="{% url 'item_edit' row.item_id %}" class="text-blue-600">Edit</a></td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="9">
          <div class="text-center py-6 text-gray-500">
            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
            <p class="mt-2">No items found.</p>
            <a href="{% url 'item_create' %}" class="mt-2 inline-block text-blue-600 underline">Create the first item</a>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<div class="flex items-center gap-3 mt-3 flex-wrap">
  <div class="flex items-center gap-1">
    {% if page_obj.has_previous %}
      <a hx-get="{% url 'items_table' %}?page={{ page_obj.previous_page_number }}&q={{ q|urlencode }}&category={{ category|urlencode }}&subcategory={{ subcategory|urlencode }}&active={{ active|urlencode }}&page_size={{ page_size }}" hx-target="#items_table" class="px-3 py-1 border rounded">Prev</a>
    {% endif %}
    {% for num in page_obj.paginator.page_range %}
      {% if num == page_obj.number %}
        <span class="px-3 py-1 border rounded bg-gray-200">{{ num }}</span>
      {% else %}
        <a hx-get="{% url 'items_table' %}?page={{ num }}&q={{ q|urlencode }}&category={{ category|urlencode }}&subcategory={{ subcategory|urlencode }}&active={{ active|urlencode }}&page_size={{ page_size }}" hx-target="#items_table" class="px-3 py-1 border rounded">{{ num }}</a>
      {% endif %}
    {% endfor %}
    {% if page_obj.has_next %}
      <a hx-get="{% url 'items_table' %}?page={{ page_obj.next_page_number }}&q={{ q|urlencode }}&category={{ category|urlencode }}&subcategory={{ subcategory|urlencode }}&active={{ active|urlencode }}&page_size={{ page_size }}" hx-target="#items_table" class="px-3 py-1 border rounded">Next</a>
    {% endif %}
  </div>
  <div class="ml-auto flex items-center gap-2">
    <label for="page_size" class="text-sm">Per page:</label>
    <select id="page_size" name="page_size" class="border rounded p-1" hx-get="{% url 'items_table' %}" hx-target="#items_table" hx-trigger="change" hx-include="#filters" hx-on:change="document.querySelector('#filters input[name=page_size]').value=this.value">
      <option value="10" {% if page_size == 10 %}selected{% endif %}>10</option>
      <option value="25" {% if page_size == 25 %}selected{% endif %}>25</option>
      <option value="50" {% if page_size == 50 %}selected{% endif %}>50</option>
      <option value="100" {% if page_size == 100 %}selected{% endif %}>100</option>
    </select>
  </div>
</div>
