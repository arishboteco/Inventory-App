{% extends "components/table.html" %}

{% block headers %}
<th class="px-4 py-2 text-right">PO #</th>
<th class="px-4 py-2">Supplier</th>
<th class="px-4 py-2">Order Date</th>
<th class="px-4 py-2">Status</th>
<th class="px-4 py-2">Progress</th>
<th class="px-4 py-2 text-right">Actions</th>
{% endblock %}

{% block rows %}
{% for po in orders %}
<tr class="odd:bg-gray-50 hover:bg-gray-100">
  <td class="px-4 py-2 text-right"><a class="text-primary" href="{% url 'purchase_order_detail' po.pk %}">{{ po.pk }}</a></td>
  <td class="px-4 py-2">{{ po.supplier.name }}</td>
  <td class="px-4 py-2">{{ po.order_date }}</td>
  <td class="px-4 py-2"><span class="px-2 py-1 rounded-full text-badge {{ po.badge_class }}">{{ po.get_status_display }}</span></td>
  <td class="px-4 py-2">
    <div class="w-full bg-gray-200 rounded-full h-2" role="progressbar" aria-valuenow="{{ po.progress_percent }}" aria-valuemin="0" aria-valuemax="100">
      <div class="h-2 bg-primary rounded-full" style="width: {{ po.progress_percent }}%"></div>
    </div>
    <div class="text-xs text-right mt-1">{{ po.received_total }} / {{ po.ordered_total }}</div>
  </td>
  <td class="px-4 py-2">
    <div class="flex justify-end gap-2">
      <a href="{% url 'purchase_order_detail' po.pk %}" class="text-primary" title="View">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.036 12.322a1 1 0 010-.644C3.423 7.51 7.373 4.5 12 4.5c4.628 0 8.578 3.01 9.964 7.178a1 1 0 010 .644C20.578 16.49 16.628 19.5 12 19.5c-4.628 0-8.578-3.01-9.964-7.178z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
        <span class="sr-only">View</span>
      </a>
      <a href="{% url 'purchase_order_edit' po.pk %}" class="text-primary" title="Edit">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.25 3.75h-6a1.5 1.5 0 00-1.5 1.5v13.5a1.5 1.5 0 001.5 1.5h13.5a1.5 1.5 0 001.5-1.5v-6"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 3.75L20.25 9M7.5 9h3.75a.75.75 0 01.75.75V13.5"/></svg>
        <span class="sr-only">Edit</span>
      </a>
      <a href="{% url 'purchase_order_receive' po.pk %}" class="text-primary" title="Receive">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7.5 10.5L12 15l4.5-4.5"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 15V3"/></svg>
        <span class="sr-only">Receive</span>
      </a>
    </div>
  </td>
</tr>
{% empty %}
<tr>
  <td colspan="6" class="px-4 py-2">
    {% url 'purchase_order_create' as po_create_url %}
    {% include "components/empty_state.html" with title="No Purchase Orders" message="Create a new purchase order to get started." cta_label="New PO" cta_url=po_create_url %}
  </td>
</tr>
{% endfor %}
{% endblock %}

{% block footer %}
<div class="mt-4">
  {% include "components/pagination.html" with page_obj=page_obj base_url="" extra_query=querystring %}
</div>
{% endblock %}
