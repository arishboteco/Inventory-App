{% extends "_base.html" %}
{% block content %}
  <h1 class="text-2xl font-semibold mb-4">Indents ({{ total_indents }})</h1>
  <div class="mb-4 flex justify-end gap-2">
    <a href="{% url 'indent_create' %}" class="btn-primary">New Indent</a>
  </div>
    <form id="filters" class="grid gap-2 mb-4 grid-cols-4 max-lg:grid-cols-4 max-md:grid-cols-2 max-sm:grid-cols-1">
      <input
        type="text"
        name="q"
        placeholder="Search indents..."
        class="form-control w-full"
        value="{{ q }}"
        hx-get="{% url 'indents_table' %}"
        hx-target="#indents_table"
        hx-trigger="keyup changed delay:300ms"
        hx-include="#filters"
      />
      <input
        type="text"
        name="status"
        list="indent-statuses"
        class="form-control w-full"
        value="{{ status }}"
        hx-get="{% url 'indents_table' %}"
        hx-target="#indents_table"
        hx-trigger="change"
        hx-include="#filters"
      />
      <datalist id="indent-statuses">
        <option value="" label="All Statuses"></option>
        <option value="SUBMITTED" label="Submitted"></option>
        <option value="PROCESSING" label="Processing"></option>
        <option value="COMPLETED" label="Completed"></option>
        <option value="CANCELLED" label="Cancelled"></option>
      </datalist>
  </form>
  <div id="indents_table"
       hx-get="{% url 'indents_table' %}"
       hx-trigger="load"
       hx-include="#filters">
    {% if total_indents == 0 %}
      {% url 'indent_create' as indent_create_url %}
      {% include "components/empty_state.html" with title="No Indents" message="Create your first indent to get started." cta_label="New Indent" cta_url=indent_create_url %}
    {% endif %}
  </div>
{% endblock %}
